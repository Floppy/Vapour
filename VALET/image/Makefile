##========---
##=- VALET
##=====---
# Vapour Technology All-Purpose Library
# Copyright 2001 Vapour Technology Ltd.
#
# Add confidentiality notice

# NOTE: Will eventually be generated by VMake

# 23/09/2001 - Warren Moore
# $Id: Makefile,v 1.6 2001/10/24 17:37:19 vap-warren Exp $

LIB = libVALETimage.a
OBJS = $(LIB)(palette.o image.o)
INC_HEADERS = palette.h image.h
CLEAN_FILES = test.log
VMAKE_FILES = 
TEST_OBJS = image.test.o image_test.o
TEST_LIBS = -lVALETimage -lVALETarch -lm
TEST_APP = image.test

include ../base.mk

# Targets

test: build $(TEST_OBJS)
ifneq "$(ARCH)" "dc"
##===--- noarch
	$(CXX) $(CFLAGS) $(CXXFLAGS) $(LDFLAGS) $(TEST_OBJS) $(TEST_LIBS) -o $(TEST_APP) && \
	chmod 755 $(TEST_APP) && \
	./$(TEST_APP)
else
##===--- dc
	$(CXX) $(CFLAGS) $(CXXFLAGS) $(LDFLAGS) $(TEST_OBJS) $(TEST_LIBS) -o $(TEST_APP) && \
	$(KOS_LOADER) $(TEST_APP) > test.log 2>&1
endif
