##========---
##=- VALET
##=====---
# Vapour Technology All-Purpose Library
# Copyright 2001 Vapour Technology Ltd.
#
# Add confidentiality notice

# NOTE: Will eventually be generated by VMake

# 23/09/2001 - Warren Moore
# $Id: Makefile,v 1.2 2001/10/18 11:10:41 vap-warren Exp $

LIB = libVALETimage.a
OBJS = $(LIB)(palette.o filter.o image.o imagefile_raw.o)
INC_HEADERS = palette.h filter.h image.h imagefile.h imagefile_raw.h
CLEAN_FILES = test.log
VMAKE_FILES = 
TEST_OBJS = image.test.o image_test.o
TEST_APP = image.test

include ../base.mk

# Targets

test: build $(TEST_OBJS)
##===--- noarch
ifneq "$(ARCH)" "dc"
	$(CXX) $(CFLAGS) $(CXXFLAGS) $(LDFLAGS) $(TEST_OBJS) -o $(TEST_APP) -lVALETcore && \
	chmod 755 $(TEST_APP) && \
	./$(TEST_APP)
else
##===--- dc
	$(CXX) $(CFLAGS) $(CXXFLAGS) $(LDFLAGS) $(TEST_OBJS) -o $(TEST_APP) -lVALETimage -lVALETarch -lkallisti -lgcc -lm && \
	$(KOS_LOADER) $(TEST_APP) > test.log 2>&1
endif
