# Makefile for VALET
# NOTE: Will eventually be generated by VMake

# 16/09/2001 - Warren Moore
# $Id: Makefile,v 1.7 2001/10/16 22:20:46 vap-warren Exp $
# Copyright 2001 Vapour Technology Ltd.

# root build sections
SECTIONS := arch core math docs 3d

.PHONY: all build test clean distclean

all: build

# build
build: $(SECTIONS:%=_build_%)

.PHONY: $(SECTIONS:%=_build_%)
$(SECTIONS:%=_build_%):
	$(MAKE) -C $(@:_build_%=%) build

# test
test: $(SECTIONS:%=_test_%)

.PHONY: $(SECTIONS:%=_test_%)
$(SECTIONS:%=_test_%):
	$(MAKE) -C $(@:_test_%=%) test

# clean
clean: $(SECTIONS:%=_clean_%) clean_common

.PHONY: $(SECTIONS:%=_clean_%)
$(SECTIONS:%=_clean_%):
	$(MAKE) -C $(@:_clean_%=%) clean

# distclean
distclean: $(SECTIONS:%=_distclean_%) clean_common

.PHONY: $(SECTIONS:%=_distclean_%)
$(SECTIONS:%=_distclean_%):
	$(MAKE) -C $(@:_distclean_%=%) distclean

# clean_common
clean_common:
	rm -rf *~ include lib

.DEFAULT:
	@echo Unknown target: $@
