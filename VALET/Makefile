# Makefile for VALET
# NOTE: Will eventually be generated by VMake

# 16/09/2001 - Warren Moore
# $Id: Makefile,v 1.10 2001/10/23 15:55:33 vap-warren Exp $
# Copyright 2001 Vapour Technology Ltd.

# root build sections
SECTIONS := docs arch core image math 3d

.PHONY: all build test clean distclean

all: build

# build
build: prebuild $(SECTIONS:%=_build_%)

.PHONY: $(SECTIONS:%=_build_%)
$(SECTIONS:%=_build_%):
	$(MAKE) -C $(@:_build_%=%) build

# prebuild
prebuild: $(SECTIONS:%=_prebuild_%)

.PHONY: $(SECTIONS:%=_prebuild_%)
$(SECTIONS:%=_prebuild_%):
	$(MAKE) -C $(@:_prebuild_%=%) prebuild

# dist
dist: $(SECTIONS:%=_dist_%)

.PHONY: $(SECTIONS:%=_dist_%)
$(SECTIONS:%=_dist_%):
	$(MAKE) -C $(@:_dist_%=%) dist

# test
test: $(SECTIONS:%=_test_%)

.PHONY: $(SECTIONS:%=_test_%)
$(SECTIONS:%=_test_%):
	$(MAKE) -C $(@:_test_%=%) test

# clean
clean: $(SECTIONS:%=_clean_%)

.PHONY: $(SECTIONS:%=_clean_%)
$(SECTIONS:%=_clean_%):
	$(MAKE) -C $(@:_clean_%=%) clean

# distclean
distclean: $(SECTIONS:%=_distclean_%)

.PHONY: $(SECTIONS:%=_distclean_%)
$(SECTIONS:%=_distclean_%):
	$(MAKE) -C $(@:_distclean_%=%) distclean

.DEFAULT:
	@echo Unknown target: $@
