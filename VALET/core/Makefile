##========---
##=- VALET
##=====---
# Vapour Technology All-Purpose Library
# Copyright 2001 Vapour Technology Ltd.
#
# Add confidentiality notice

# NOTE: Will eventually be generated by VMake

# 23/09/2001 - Warren Moore
# $Id: Makefile,v 1.5 2001/10/18 10:40:44 vap-warren Exp $

LIB = libVALETcore.a
OBJS = $(LIB)(loghandle.o logmanager.o log.o)
INC_HEADERS = log.h logmanager.h
CLEAN_FILES = log.test test.log
VMAKE_FILES = loghandle.cpp loghandle.h log_test.cpp
TEST_OBJS = log.test.o log_test.o
TEST_APP = log.test

include ../base.mk

# Targets

test: build $(TEST_OBJS)
##===--- noarch
ifneq "$(ARCH)" "dc"
	$(CXX) $(CFLAGS) $(CXXFLAGS) $(LDFLAGS) $(TEST_OBJS) -o $(TEST_APP) -lVALETcore && \
	chmod 755 $(TEST_APP) && \
	./$(TEST_APP)
else
##===--- dc
	$(CXX) $(CFLAGS) $(CXXFLAGS) $(LDFLAGS) $(TEST_OBJS) -o $(TEST_APP) -lVALETcore -lVALETarch -lkallisti -lgcc && \
	$(KOS_LOADER) $(TEST_APP) > test.log 2>&1
endif
