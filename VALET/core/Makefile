##========---
##=- VALET
##=====---
# Vapour Technology All-Purpose Library
# Copyright 2001 Vapour Technology Ltd.
#
# Add confidentiality notice

# NOTE: Will eventually be generated by VMake

# 23/09/2001 - Warren Moore
# $Id: Makefile,v 1.2 2001/10/17 00:24:01 vap-warren Exp $

# section specific
LIB = libVALETcore.a
OBJS = $(LIB)(loghandle.o logmanager.o log.o)
TESTOBJS = log.test.o log_test.o

include ../base.mk

# Targets

build: $(LIB)
	-mkdir ../lib 2> /dev/null ; \
	cp $(LIB) ../lib
	-mkdir ../include 2> /dev/null ; \
	cp log.h logmanager.h ../include

test: build $(TESTOBJS)
##===--- noarch
	$(CXX) $(CFLAGS) $(CXXFLAGS) $(LDFLAGS) $(TESTOBJS) -o log.test -lVALETcore && \
	chmod 755 log.test && \
	./log.test
##===--- dc
#	$(CXX) $(CFLAGS) $(CXXFLAGS) $(LDFLAGS) $(TESTOBJS) -o log.test.elf -L. -lVALETcore -lVALETarch -lkallisti -lgcc && \
#	$(KOS_LOADER) log.test.elf > test.dc.log 2>&1

clean:
	rm -rf $(LIB) *.o *~ log.test log.test.elf *.log
	
distclean: clean
	rm -rf loghandle.cpp loghandle.h log_test.cpp

