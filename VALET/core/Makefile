# Makefile for VALET/core
# NOTE: Will eventually be generated by VMake

# 23/09/2001 - Warren Moore
# $Id: Makefile,v 1.1 2001/09/26 13:10:09 vap-warren Exp $
# Copyright 2001 Vapour Technology Ltd.

CC = g++
CFLAGS = -g -O -Wall
AR = ar
ARFLAGS = r
RANLIB = ranlib

LIB = libVALETcore.a
OBJS = $(LIB)(loghandle.o) $(LIB)(logmanager.o) $(LIB)(log.o) 

.PHONY: all build

# Targets

all: build test

build: $(LIB)

$(LIB): $(OBJS)
	$(RANLIB) $(LIB)

test: build log.test.o
	$(CC) log.test.o -o log.test -L. -lVALETcore && \
	chmod 755 log.test && \
	./log.test

clean:
	rm -rf $(LIB) *.o *~ log.test test.log
	
distclean: clean
	rm -rf loghandle.cpp loghandle.h
	
# Production rules
	
.cpp.o:
	$(CC) $(CFLAGS) -c $<
	
.cpp.a:
	$(CC) $(CFLAGS) -c $<
	$(AR) $(ARFLAGS) $@ $%

# Default

.DEFAULT:
	@echo Unknown target $@
	

